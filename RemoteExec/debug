ğŸ§ª DÃ‰MONSTRATION - ENHANCED ANALYZER REMOTE
============================================================
ğŸ¯ Initialisation Enhanced Vulnerability Analyzer...
  âœ… Base Vulhub connectÃ©e: ./vulhub_chroma_db
  âœ… Enhanced Analyzer initialisÃ©

ğŸ”— Configuration de la connexion distante...

ğŸ”§ Configuration SSH pour accÃ¨s machine hÃ´te
ğŸ”— Initialisation SSH Manager pour 100.91.1.1
ğŸ” Connexion SSH avec mot de passe
âœ… Connexion SSH Ã©tablie vers 100.91.1.1
ğŸ–¥ï¸ Commande hÃ´te: echo 'SSH Test OK'
  âœ… SuccÃ¨s (code 0)
âœ… Test SSH rÃ©ussi: SSH Test OK
ğŸ” Remote Reconnaissance Tools initialized
âœ… Connexion distante Ã©tablie

ğŸ“¦ SÃ©lection du container cible...
donnez l'id du container  94672c93e89b
ğŸ¯ Container cible dÃ©fini: 94672c93e89b
ğŸ§ª Test de connectivitÃ© du container 94672c93e89b...
ğŸ³ Container 94672c93e89b: echo 'Container Test OK'
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'echo 'Container Test OK''
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: uname -a
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'uname -a'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which curl
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which curl'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which wget
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which wget'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which nmap
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which nmap'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which netstat
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which netstat'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which ss
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which ss'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: id
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'id'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: ls -la /
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ls -la /'
  âœ… SuccÃ¨s (code 0)
test terminÃ©s

ğŸ¯ Analyse de: apache-cxf/CVE-2024-28752

ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯
ğŸ¯ ANALYSE ENHANCED AVEC EXÃ‰CUTION DISTANTE
ğŸ¯ VULHUB ID: apache-cxf/CVE-2024-28752
ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯

ğŸ”— [1/6] Configuration connexion distante...

ğŸ”— Configuration de la connexion distante...

ğŸ”§ Configuration SSH pour accÃ¨s machine hÃ´te
ğŸ”— Initialisation SSH Manager pour 100.91.1.1
ğŸ” Connexion SSH avec mot de passe
âœ… Connexion SSH Ã©tablie vers 100.91.1.1
ğŸ–¥ï¸ Commande hÃ´te: echo 'SSH Test OK'
  âœ… SuccÃ¨s (code 0)
âœ… Test SSH rÃ©ussi: SSH Test OK
ğŸ” Remote Reconnaissance Tools initialized
âœ… Connexion distante Ã©tablie

ğŸ“¦ [2/6] SÃ©lection du container cible...

ğŸ“¦ SÃ©lection du container cible...
donnez l'id du container  94672c93e89b
ğŸ¯ Container cible dÃ©fini: 94672c93e89b
ğŸ§ª Test de connectivitÃ© du container 94672c93e89b...
ğŸ³ Container 94672c93e89b: echo 'Container Test OK'
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'echo 'Container Test OK''
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: uname -a
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'uname -a'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which curl
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which curl'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which wget
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which wget'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which nmap
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which nmap'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which netstat
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which netstat'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: which ss
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which ss'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: id
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'id'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: ls -la /
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ls -la /'
  âœ… SuccÃ¨s (code 0)
test terminÃ©s

ğŸ” [3/6] Reconnaissance distante...

ğŸ” RECONNAISSANCE DISTANTE EN COURS...
----------------------------------------
ğŸ” [1/6] Scan Nmap...
ğŸ” Scan nmap de 127.0.0.1 ports 1-1000
ğŸ³ Container 94672c93e89b: which nmap
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'which nmap'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: nmap -sT -O -sV 127.0.0.1 -p 1-1000
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'nmap -sT -O -sV 127.0.0.1 -p 1-1000'
  âœ… SuccÃ¨s (code 0)
  âœ… 0 ports ouverts trouvÃ©s
  âœ… 0 ports ouverts: []
ğŸŒ [2/6] Analyse Netstat...
ğŸŒ Analyse netstat...
ğŸ³ Container 94672c93e89b: netstat -tuln
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'netstat -tuln'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: netstat -tun
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'netstat -tun'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: netstat -tulnp 2>/dev/null || netstat -tuln
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'netstat -tulnp 2>/dev/null || netstat -tuln'
  âœ… SuccÃ¨s (code 0)
  âœ… Analyse rÃ©seau terminÃ©e
âš™ï¸ [3/6] Scan des processus...
âš™ï¸ Analyse des processus...
ğŸ³ Container 94672c93e89b: ps aux
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ps aux'
  âŒ Ã‰chec (code 127): /bin/bash: line 1: ps: command not found

ğŸ³ Container 94672c93e89b: ps -ef --forest
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ps -ef --forest'
  âŒ Ã‰chec (code 127): /bin/bash: line 1: ps: command not found

ğŸ³ Container 94672c93e89b: top -b -n 1
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'top -b -n 1'
  âŒ Ã‰chec (code 127): /bin/bash: line 1: top: command not found

  âœ… Processus analysÃ©s
ğŸŒ [4/6] DÃ©couverte services web...
ğŸŒ DÃ©couverte web sur http://localhost
ğŸ³ Container 94672c93e89b: curl -s -I -m 5 http://localhost:80
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'curl -s -I -m 5 http://localhost:80'
  âŒ Ã‰chec (code 7): 
ğŸ³ Container 94672c93e89b: curl -s -I -m 5 http://localhost:8080
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'curl -s -I -m 5 http://localhost:8080'
  âœ… SuccÃ¨s (code 0)
  âœ… Service trouvÃ© sur port 8080
ğŸ³ Container 94672c93e89b: curl -s -I -m 5 http://localhost:8443
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'curl -s -I -m 5 http://localhost:8443'
  âŒ Ã‰chec (code 7): 
ğŸ³ Container 94672c93e89b: curl -s -I -m 5 http://localhost:443
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'curl -s -I -m 5 http://localhost:443'
  âŒ Ã‰chec (code 7): 
ğŸ³ Container 94672c93e89b: curl -s -I -m 5 http://localhost:3000
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'curl -s -I -m 5 http://localhost:3000'
  âŒ Ã‰chec (code 7): 
ğŸ³ Container 94672c93e89b: curl -s -I -m 5 http://localhost:8000
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'curl -s -I -m 5 http://localhost:8000'
  âŒ Ã‰chec (code 7): 
ğŸ³ Container 94672c93e89b: curl -s -I -m 5 http://localhost:8888
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'curl -s -I -m 5 http://localhost:8888'
  âŒ Ã‰chec (code 7): 
ğŸ³ Container 94672c93e89b: curl -s -I -m 5 http://localhost:9000
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'curl -s -I -m 5 http://localhost:9000'
  âŒ Ã‰chec (code 7): 
  âœ… Services web: 1 ports accessibles
ğŸ“ [5/6] Reconnaissance filesystem...
ğŸ“ Reconnaissance filesystem...
ğŸ³ Container 94672c93e89b: ls -la /
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ls -la /'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: ls -la /home/ 2>/dev/null || echo 'No /home'
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ls -la /home/ 2>/dev/null || echo 'No /home''
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: ls -la /var/www/ 2>/dev/null || echo 'No /var/www'
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ls -la /var/www/ 2>/dev/null || echo 'No /var/www''
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: ls -la /etc/ | head -20
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ls -la /etc/ | head -20'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: ls -la /tmp/
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'ls -la /tmp/'
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: cat /proc/version 2>/dev/null || echo 'No /proc/version'
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'cat /proc/version 2>/dev/null || echo 'No /proc/version''
  âœ… SuccÃ¨s (code 0)
ğŸ³ Container 94672c93e89b: cat /etc/passwd | head -10
ğŸ–¥ï¸ Commande hÃ´te: docker exec 94672c93e89b /bin/bash -c 'cat /etc/passwd | head -10'
  âœ… SuccÃ¨s (code 0)
  âœ… Filesystem analysÃ©
ğŸ³ [6/6] Informations container...
ğŸ” Inspection du container 94672c93e89b...
ğŸ–¥ï¸ Commande hÃ´te: docker inspect 94672c93e89b
  âœ… SuccÃ¨s (code 0)
  ğŸ“‹ Container: cve-2024-28752-cxf-1
  ğŸ·ï¸ Image: vulhub/apache-cxf:3.2.14
  ğŸŒ IP: 
  ğŸ”Œ Ports: 1 exposÃ©s
  âœ… Container: cve-2024-28752-cxf-1
âœ… Reconnaissance distante terminÃ©e

ğŸ“š [4/6] RÃ©cupÃ©ration documentation Vulhub...
ğŸ“š RÃ©cupÃ©ration documentation Vulhub: apache-cxf/CVE-2024-28752
/tmp/ipykernel_6510/218638656.py:237: LangChainDeprecationWarning: The method `BaseRetriever.get_relevant_documents` was deprecated in langchain-core 0.1.46 and will be removed in 1.0. Use :meth:`~invoke` instead.
  docs = self.retriever.get_relevant_documents(vulhub_id)
  âœ… Documentation trouvÃ©e

ğŸ§  [5/6] Fusion intelligence + donnÃ©es rÃ©elles...
ğŸ§  Fusion documentation + donnÃ©es rÃ©elles...
/tmp/ipykernel_6510/218638656.py:256: LangChainDeprecationWarning: The method `Chain.run` was deprecated in langchain 0.1.0 and will be removed in 1.0. Use :meth:`~invoke` instead.
  raw_output = self.extraction_chain.run(
  âš  Tentative 1 Ã©chouÃ©e: Failed to parse EnhancedVulhubInfo from completion null. Got: 1 validation error for EnhancedVulhubInfo
  Input should be a valid dictionary or instance of EnhancedVulhubInfo [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/OUTPUT_PARSING_FAILURE 
  âš  Tentative 2 Ã©chouÃ©e: Failed to parse EnhancedVulhubInfo from completion null. Got: 1 validation error for EnhancedVulhubInfo
  Input should be a valid dictionary or instance of EnhancedVulhubInfo [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/OUTPUT_PARSING_FAILURE 
  âš  Tentative 3 Ã©chouÃ©e: Failed to parse EnhancedVulhubInfo from completion null. Got: 1 validation error for EnhancedVulhubInfo
  Input should be a valid dictionary or instance of EnhancedVulhubInfo [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/OUTPUT_PARSING_FAILURE 
  ğŸ”„ Utilisation du fallback enhanced...

ğŸ“Š [6/6] GÃ©nÃ©ration rapport enhanced...
ğŸ“Š GÃ©nÃ©ration du rapport enhanced...
  âŒ Erreur gÃ©nÃ©ration rapport: `dumps_kwargs` keyword arguments are no longer supported.

âœ… ANALYSE ENHANCED TERMINÃ‰E
â±ï¸ Temps d'exÃ©cution: 32.59 secondes
ğŸ¯ Score de confiance: 0.80
ğŸ” Ports rÃ©els dÃ©tectÃ©s: 0
ğŸŒ Services web: 1
ğŸ”Œ Connexion SSH fermÃ©e

ğŸ‰ ANALYSE ENHANCED RÃ‰USSIE!
   âœ… Validation rÃ©elle: True
   ğŸ¯ Confiance: 0.80
/tmp/ipykernel_6510/218638656.py:321: PydanticDeprecatedSince20: The `json` method is deprecated; use `model_dump_json` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
  enhanced_vulhub_info=enhanced_info.json(indent=2),
/tmp/ipykernel_6510/218638656.py:430: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
  "enhanced_vulhub_info": enhanced_info.dict(),
/tmp/ipykernel_6510/218638656.py:431: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
  "enhanced_analysis_report": enhanced_report.dict(),
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
Cell In[27], line 58
     55     print(f"\nğŸ‰ DÃ‰MONSTRATION TERMINÃ‰E")
     57 if __name__ == "__main__":
---> 58     demo_enhanced_analyzer()
     60 print("\nğŸ¯ ENHANCED VULNERABILITY ANALYZER READY!")
     61 print("CapacitÃ©s: SSH + Docker + Nmap + Reconnaissance rÃ©elle + Intelligence Pydantic")

Cell In[27], line 43, in demo_enhanced_analyzer()
     41 print(f"   âœ… Validation rÃ©elle: {enhanced_report['real_world_validation']}")
     42 print(f"   ğŸ¯ Confiance: {enhanced_report['confidence_score']:.2f}")
---> 43 print(f"   ğŸ” Surface d'attaque: {len(enhanced_report['attack_surface']['confirmed_ports'])} ports")
     45 # Sauvegarde du rapport
     46 report_file = f"enhanced_analysis_{selected_vulhub.replace('/', '_')}.json"

KeyError: 'confirmed_ports'
